<div class="main__container">
    <div class="botonera">
        <button 
            pButton 
            type="button" 
            name="btnReporte" 
            label="Agregar grupo de productos" 
            class="btn__ok p-button-sm p-button-secondary" 
            icon="pi pi-plus"
            (click)="abrirDialogoNuevoGrupo(undefined)">
        </button>
        <button 
            *ngIf="grupos.length > 0"   
            pButton     
            type="button" 
            name="btnReporte" 
            label="Borrar todo" 
            class="p-button-sm p-button-danger" 
            icon="pi pi-trash"
            (click)="borrarGrupos()">
        </button>
    </div>
    <div class="grupos" *ngIf="grupos.length > 0">
        <hr>
        <table>
            <thead>
                <tr>
                  <th>Corte</th>
                  <th>Detalles</th>
                  <th *ngFor="let grupo of grupos; let i = index" class="grupo-header">
                    <div class="header-content">
                    <span>Grupo {{ i + 1 }}: ({{ grupo.nombre }})</span>
                    <button
                        pTooltip="Editar '{{grupo.nombre}}'"
                        tooltipPosition="bottom" 
                        pButton 
                        type="button" 
                        icon="pi pi-pencil" 
                        class="p-button-sm p-element p-ripple p-button-rounded p-button-warning p-button-text p-button p-component p-button-icon-only" (click)="editarGrupo(i)">
                    </button>
                    <button
                        pTooltip="Eliminar '{{grupo.nombre}}'"
                        tooltipPosition="bottom" 
                        pButton 
                        type="button" 
                        icon="pi pi-trash" 
                        class="p-button-sm p-element p-ripple p-button-rounded p-button-danger p-button-text p-button p-component p-button-icon-only" (click)="eliminarGrupo(i)">
                    </button>
                    </div>
                    </th>
                </tr>
            </thead>
            <tbody class="table__body">
                <tr *ngFor="let qamark of qamarksEnGrupos; let i = index" [ngClass]="{'fila-impar': i % 2 !== 0}">
                    <td>{{qamark}}</td>
                    <td class="detalles">
                        <div class="centered-content">
                            <div>CÃ³digo</div>
                            <div>Producto</div>
                            <div>Peso</div>
                            <div>Rend</div>
                        </div>
                    </td>
                    <td *ngFor="let grupo of grupos" class="detalles">
                        <ng-container *ngIf="buscarProductosPorQamark(grupo.productos, qamark).length; else noProducto" class="ngcontainer">
                            <div *ngFor="let producto of buscarProductosPorQamark(grupo.productos, qamark)" class="centered-content values">
                                <div>{{producto.codigo}}</div>
                                <div>{{producto.nombre}}</div>
                                <div>{{producto.pesoPromedio | number:'0.2-2'}}</div>
                                <div>{{producto.rendimiento | percent:'0.2-2'}}</div>
                            </div>
                        </ng-container>
                        <ng-template #noProducto><span class="no-data">-</span></ng-template>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
